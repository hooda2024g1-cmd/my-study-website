<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุณุฌูู ุงูุฏุฎูู - ุงูููุตุฉ ุงูุฏุฑุงุณูุฉ</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ุงููุงูุจุงุฑ -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <h1>ููุตุชู<span>ุงูุฏุฑุงุณูุฉ</span></h1>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html"><i class="fas fa-home"></i> ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="register.html"><i class="fas fa-user-plus"></i> ุฅูุดุงุก ุญุณุงุจ</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div class="auth-container">
        <div class="auth-box">
            <!-- ุงูุนููุงู -->
            <div class="auth-header">
                <h2><i class="fas fa-sign-in-alt"></i> ุชุณุฌูู ุงูุฏุฎูู</h2>
                <p>ูุฑุญุจุงู ุจุนูุฏุชู! ุณุฌู ุฏุฎููู ููุงุณุชูุฑุงุฑ</p>
            </div>

            <!-- ุงููููุฐุฌ -->
            <form id="loginForm" class="auth-form">
                <!-- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู -->
                <div class="form-group">
                    <label for="email">
                        <i class="fas fa-envelope"></i> ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *
                    </label>
                    <input type="email" id="loginEmail" name="email" required
                           placeholder="example@email.com">
                </div>

                <!-- ูููุฉ ุงููุฑูุฑ -->
                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i> ูููุฉ ุงููุฑูุฑ *
                    </label>
                    <input type="password" id="loginPassword" name="password" required
                           placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                    
                    <!-- ูุณูุงู ูููุฉ ุงููุฑูุฑ -->
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="remember" name="remember">
                            <span>ุชุฐูุฑูู</span>
                        </label>
                        <a href="forgot-password.html" class="forgot-password">
                            ูุณูุช ูููุฉ ุงููุฑูุฑุ
                        </a>
                    </div>
                </div>

                <!-- ุฒุฑ ุชุณุฌูู ุงูุฏุฎูู -->
                <button type="submit" class="auth-submit-btn" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> ุชุณุฌูู ุงูุฏุฎูู
                    <span class="btn-loading"></span>
                </button>

                <!-- ุฑูุงุจุท ุฃุฎุฑู -->
                <div class="auth-links">
                    <p>ููุณ ูุฏูู ุญุณุงุจุ <a href="register.html">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</a></p>
                    <p>ุฃู</p>
                    <button type="button" class="social-login-btn google-btn">
                        <i class="fab fa-google"></i> ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู Google
                    </button>
                </div>
            </form>
        </div>

        <!-- ูุณู ุงููุฒุงูุง -->
        <div class="auth-sidebar">
            <h3><i class="fas fa-star"></i> ูุฒุงูุง ุชุณุฌูู ุงูุฏุฎูู</h3>
            <ul class="benefits-list">
                <li><i class="fas fa-check-circle"></i> ุงููุตูู ุฅูู ุฌููุน ุงููููุงุช ุงููุญููุธุฉ</li>
                <li><i class="fas fa-check-circle"></i> ุชุญููู 50 ููู ุดูุฑูุงู</li>
                <li><i class="fas fa-check-circle"></i> ูุชุงุจุนุฉ ุงูุชูุฏู ุงูุฏุฑุงุณู</li>
                <li><i class="fas fa-check-circle"></i> ุดูุงุฏุงุช ุฅุชูุงู ุงูุฏูุฑุงุช</li>
                <li><i class="fas fa-check-circle"></i> ุฏุนู ููู ูููุฒ</li>
                <li><i class="fas fa-check-circle"></i> ุชุญุฏูุซุงุช ูุณุชูุฑุฉ</li>
            </ul>

            <!-- ุฅุญุตุงุฆูุงุช -->
            <div class="stats-box">
                <h4><i class="fas fa-chart-line"></i> ุฅุญุตุงุฆูุงุช ุงูููุตุฉ</h4>
                <div class="mini-stats">
                    <div class="mini-stat">
                        <span class="number">5,000+</span>
                        <span class="label">ุทุงูุจ</span>
                    </div>
                    <div class="mini-stat">
                        <span class="number">12,000+</span>
                        <span class="label">ููู</span>
                    </div>
                    <div class="mini-stat">
                        <span class="number">99%</span>
                        <span class="label">ุฑุถุง</span>
                    </div>
                </div>
            </div>

            <!-- ุตูุฑุฉ ุชูุถูุญูุฉ -->
            <div class="auth-illustration">
                <img src="../assets/images/login-illustration.png" alt="ุชุณุฌูู ุงูุฏุฎูู">
            </div>
        </div>
    </div>

    <!-- ุฑุณุงูุฉ ุงููุฌุงุญ -->
    <div id="loginSuccessModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>ูุฑุญุจุงู ุจุนูุฏุชู! ๐</h3>
            <p>ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ</p>
            <div class="modal-actions">
                <button onclick="redirectToDashboard()" class="btn-primary">
                    <i class="fas fa-tachometer-alt"></i> ุงูุฐูุงุจ ูููุญุฉ ุงูุชุญูู
                </button>
            </div>
        </div>
    </div>

    <!-- ุงูููุชุฑ -->
    <footer style="margin-top: 0;">
        <div class="container">
            <div class="footer-bottom">
                <div class="team-credits">
                    <p>
                        <i class="fas fa-code"></i> 
                        <strong>ุงููุทูุฑ:</strong> ูุญููุฏ ุฃุญูุฏ ุณุนูุฏ
                    </p>
                    <p>
                        <i class="fas fa-lightbulb"></i> 
                        <strong>ุตุงุญุจุฉ ุงูููุฑุฉ:</strong> ุณููู ุณูุฏ ุณุฎูู
                    </p>
                </div>
                <p class="copyright">
                    ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2026 - ุงูููุตุฉ ุงูุฏุฑุงุณูุฉ ุงูุฐููุฉ
                </p>
            </div>
        </div>
    </footer>

    <!-- ุงูุฑูุงุจุท ุงูุฌุงูุงุณูุฑูุจุช -->
    <script src="../js/main.js"></script>
    <script src="../js/auth.js"></script>
    <script>
        // ูุธุงู ุชุณุฌูู ุงูุฏุฎูู
        class LoginManager {
            constructor() {
                this.init();
            }

            init() {
                this.initFormValidation();
                this.checkRememberedUser();
            }

            initFormValidation() {
                const form = document.getElementById('loginForm');
                if (!form) return;

                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    await this.handleLogin();
                });
            }

            async handleLogin() {
                const email = document.getElementById('loginEmail').value.trim();
                const password = document.getElementById('loginPassword').value;
                const remember = document.getElementById('remember').checked;
                const loginBtn = document.getElementById('loginBtn');

                // ุงูุชุญูู ูู ุงููุฏุฎูุงุช
                if (!email || !password) {
                    this.showNotification('ุงูุฑุฌุงุก ููุก ุฌููุน ุงูุญููู', 'error');
                    return;
                }

                // ุงูุชุญูู ูู ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
                if (!this.validateEmail(email)) {
                    this.showNotification('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ', 'error');
                    return;
                }

                // ุนุฑุถ ุญุงูุฉ ุงูุชุญููู
                loginBtn.classList.add('loading');
                loginBtn.disabled = true;

                try {
                    // ูุญุงูุงุฉ ุงูุชุฃุฎูุฑ ููุงุชุตุงู ุจุงูุฎุงุฏู
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    // ุงูุชุญูู ูู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู LocalStorage
                    const user = this.authenticateUser(email, password);
                    
                    if (user) {
                        // ุญูุธ ุจูุงูุงุช ุงูุฌูุณุฉ
                        this.createSession(user, remember);
                        
                        // ุนุฑุถ ุฑุณุงูุฉ ุงููุฌุงุญ
                        this.showSuccess();
                    } else {
                        throw new Error('ุจูุงูุงุช ุงูุฏุฎูู ุบูุฑ ุตุญูุญุฉ');
                    }
                } catch (error) {
                    this.showNotification('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ', 'error');
                } finally {
                    loginBtn.classList.remove('loading');
                    loginBtn.disabled = false;
                }
            }

            authenticateUser(email, password) {
                try {
                    // ุงูุจุญุซ ูู ุงููุณุชุฎุฏููู ุงููุณุฌููู
                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    
                    // ุชุดููุฑ ูููุฉ ุงููุฑูุฑ ุงููุฏุฎูุฉ (ุจููุณ ุทุฑููุฉ ุงูุชุณุฌูู)
                    const hashedPassword = btoa(password);
                    
                    // ุงูุจุญุซ ุนู ุงููุณุชุฎุฏู
                    const user = users.find(u => 
                        u.email === email && u.password === hashedPassword
                    );
                    
                    return user;
                } catch (error) {
                    console.error('ุฎุทุฃ ูู ุงููุตุงุฏูุฉ:', error);
                    return null;
                }
            }

            createSession(user, remember) {
                // ุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                // ุฅุฐุง ุงุฎุชุงุฑ "ุชุฐูุฑูู"
                if (remember) {
                    localStorage.setItem('rememberedUser', JSON.stringify({
                        email: user.email,
                        timestamp: Date.now()
                    }));
                } else {
                    localStorage.removeItem('rememberedUser');
                }
                
                // ุญูุธ ุขุฎุฑ ููุช ุชุณุฌูู ุฏุฎูู
                localStorage.setItem('lastLogin', Date.now());
            }

            checkRememberedUser() {
                try {
                    const remembered = JSON.parse(localStorage.getItem('rememberedUser'));
                    if (remembered) {
                        const emailInput = document.getElementById('loginEmail');
                        if (emailInput) {
                            emailInput.value = remembered.email;
                            document.getElementById('remember').checked = true;
                        }
                    }
                } catch (error) {
                    console.error('ุฎุทุฃ ูู ุชุญููู ุงููุณุชุฎุฏู ุงููุชุฐูุฑ:', error);
                }
            }

            showSuccess() {
                const modal = document.getElementById('loginSuccessModal');
                if (modal) {
                    modal.style.display = 'flex';
                    
                    // ุชูุฌูู ุชููุงุฆู ุจุนุฏ 3 ุซูุงูู
                    setTimeout(() => {
                        window.location.href = '../index.html';
                    }, 3000);
                }
            }

            validateEmail(email) {
                const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return regex.test(email);
            }

            showNotification(message, type = 'info') {
                if (typeof window.showNotification === 'function') {
                    window.showNotification(message, type);
                } else {
                    alert(message);
                }
            }
        }

        // ุชููุฆุฉ ูุธุงู ุชุณุฌูู ุงูุฏุฎูู
        document.addEventListener('DOMContentLoaded', () => {
            new LoginManager();
            
            // ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู Google
            const googleBtn = document.querySelector('.google-btn');
            if (googleBtn) {
                googleBtn.addEventListener('click', () => {
                    alert('ุณูุชู ุชูุนูู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู Google ูุฑูุจุงู');
                });
            }
        });

        // ุฏุงูุงุช ุงููุณุงุนุฏุฉ
        function redirectToDashboard() {
            window.location.href = '../index.html';
        }
    </script>
</body>
</html>